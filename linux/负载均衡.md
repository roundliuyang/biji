# 负载均衡



## 四层负载均衡



四层负载均衡是基于IP+端口的负载均衡，原理是通过转发请求到后台的服务器，它是只负责转发，并且会记录当前连接是由哪个服务器处理的，后续这个连接的请求就会由同一台服务器去处理。其实也就相当于长连接，这个连接一旦打开，就会一直处于连接的状态，性能就非常的高了。

四层是传输层的，主要基于TCP和UDP。



- F5硬负载均衡
- LVS四层负载均衡
- Haproxy四层负载均衡
- Nginx 四层负载均衡

F5是一个基于硬件的硬负载均衡，本身功能非常强大，性能也是非常的高的，稳定性也非常不错，但是非常贵，因为它是基于硬件的。

LVS 是四层负载均衡，它是Linux内核的一个四层负载。

Haproxy是四层负载均衡，它是支持转发功能，灵活性非常的高。除了四层以外也能做七层的负载均衡。

Nginx 在新版本里面也能够实现四层负载均衡，但是我们一般来说使用nginx做7层负载均衡。





## 七层负载均衡



七层负载均衡是基于url、ip的一个负载均衡，是基于与应用层的，是针对于http协议的一个负载均衡。



- Nginx七层负载均衡
- Haproxy七层负载均衡
- apache 七层负载均衡



七层负载均衡基本上是用于处理http协议的，适用于web服务器，像tomcat、apache  等。
四层负载均衡主要是用于处理基于TCP、UDP协议这种负载均衡。四层的话是用于转发请求，而不是去处理的，它可以把用户的请求转发给其它应用去处理。七层的话会处理请求的，像nginx的话就能够对响应处理js、css等等文本的内容，可以去压缩也可以去缓存，相当于针对我们的请求响应做一个处理。





## DNS 地域负载均衡



![1704543223637](负载均衡.assets/1704543223637.png)

